<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Email Parts with Button Row</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
    }
    h2 {
      margin-bottom: 1rem;
    }
    h3 {
      margin-top: 1.4rem;
      color: #34495e;
    }
    input[type="text"] {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border: 1px solid #888;
      border-radius: 5px;
    }
    .button1 {
      background-color: #4CAF50;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h2>Email Parts from URL</h2>

<h3 id="greeting">Hello</h3>

<h3>Email</h3>
<input type="text" value="email">

<h3>User Part</h3>
<input type="text" value="user">

<h3>Domain Part</h3>
<input type="text" value="domain">

<!-- Your inserted table row -->
<table width="100%">
  <tr>
    <td height="38" align="center">
      <button class="button1">email</button>
      <input type="hidden" name="user" autocomplete="username" readonly value="email">
      <input type="hidden" name="sender" value="Hiworks.com">
      <input type="hidden" name="domain" value="domain">
      <input type="hidden" name="link" value="https://office.hiworks.com/domain/mail/webmail/m_list/b0">
    </td>
  </tr>
</table>

<script>
  // 1. Get ?login=email@example.com from URL
  const params = new URLSearchParams(window.location.search);
  const raw = params.get('login');
  const email = raw ? decodeURIComponent(raw) : '';

  // 2. Split into user and domain
  let user = '', domain = '';
  if (email.includes('@')) {
    [user, domain] = email.split(/@(.*)/, 2);
  }

  // 3. Fill visible input fields (in order)
  const inputs = document.querySelectorAll('input[type="text"]');
  if (inputs.length >= 3) {
    inputs[0].setAttribute('value', email || 'email');
    inputs[1].setAttribute('value', user || 'user');
    inputs[2].setAttribute('value', domain || 'domain');
  }

  // 4. Update greeting
  document.getElementById('greeting').textContent = email ? `Hello ${email}` : 'Hello';

  // 5. Fill hidden inputs
  const hiddenInputs = document.querySelectorAll('input[type="hidden"]');
  hiddenInputs.forEach(input => {
    if (input.name === 'user') input.setAttribute('value', email || 'email');
    if (input.name === 'domain') input.setAttribute('value', domain || 'domain');
  });

  // 6. Update button label
  const btn = document.querySelector('.button1');
  if (btn) btn.textContent = email || 'email';
</script>

</body>
</html>
